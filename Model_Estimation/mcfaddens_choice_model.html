
<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>McFadden's Choice Model (Alternative-Specific Conditional Logit) - LOST</title>
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="/assets/css/just-the-docs.css">
    <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script>
  <script type="text/javascript" src="/assets/js/just-the-docs.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>McFadden’s Choice Model (Alternative-Specific Conditional Logit) | LOST</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="McFadden’s Choice Model (Alternative-Specific Conditional Logit)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Source code for the Library of Statistical Techniques" />
<meta property="og:description" content="Source code for the Library of Statistical Techniques" />
<meta property="og:site_name" content="LOST" />
<script type="application/ld+json">
{"description":"Source code for the Library of Statistical Techniques","headline":"McFadden’s Choice Model (Alternative-Specific Conditional Logit)","@type":"WebPage","url":"/Model_Estimation/mcfaddens_choice_model.html","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({ TeX: { equationNumbers: { autoNumber: "AMS" } } });
  </script>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML">
  </script>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="link" viewBox="0 0 16 16">
      <title>Link</title>
      <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
    </symbol>
  </svg>
  <div class="page-wrap">
    <div class="side-bar">
      <div class="site-header">
        <a href="" class="site-title lh-tight">
  LOST
</a>
        <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button>
      </div>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list"><li class="navigation-list-item"><a href="/" class="navigation-list-link">Home</a></li><li class="navigation-list-item active"><a href="/Data/" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="/Data_Manipulation/data_manipulation.html" class="navigation-list-link">Data Manipulation</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Data_Manipulation/collapse_a_data_set.html" class="navigation-list-link">Collapse a Data Set</a></li><li class="navigation-list-item "><a href="/Data_Manipulation/Combining_Datasets/combining_datasets_overview.html" class="navigation-list-link">Combining Datasets</a><ul class="navigation-list-child-list"><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Combining_Datasets/combining_datasets_vertical_combination.html" class="navigation-list-link">Vertical Combination</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Combining_Datasets/combining_datasets_horizontal_merge_deterministic.html" class="navigation-list-link">Horizontal Combination (Deterministic)</a>
                          </li></ul></li><li class="navigation-list-item "><a href="/Data_Manipulation/determine_the_observation_level_of_a_data_set.html" class="navigation-list-link">Determine the Observation Level of a Data Set</a></li><li class="navigation-list-item "><a href="/Data_Manipulation/Reshaping/reshape.html" class="navigation-list-link">Reshaping Data</a><ul class="navigation-list-child-list"><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Reshaping/reshape_panel_data_from_wide_to_long.html" class="navigation-list-link">Reshape Panel Data from Wide to Long</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Data_Manipulation/Reshaping/reshape_panel_data_from_long_to_wide.html" class="navigation-list-link">Reshape Panel Data from Long to Wide</a>
                          </li></ul></li></ul></li><li class="navigation-list-item"><a href="/Geo-Spatial/Summary_Techniques.html" class="navigation-list-link">Geo-Spatial</a><ul class="navigation-list-child-list "></ul></li><li class="navigation-list-item"><a href="/Machine_Learning/Machine_Learning.html" class="navigation-list-link">Machine Learning</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Machine_Learning/penalized_regression.html" class="navigation-list-link">Penalized Regression</a></li></ul></li><li class="navigation-list-item active"><a href="/Model_Estimation/Estimation.html" class="navigation-list-link">Model Estimation</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Model_Estimation/fixed_effects_in_linear_regression.html" class="navigation-list-link">Fixed Effects in Linear Regression</a></li><li class="navigation-list-item "><a href="/Model_Estimation/heckman_correction_model.html" class="navigation-list-link">Heckman Correction Model</a></li><li class="navigation-list-item "><a href="/Model_Estimation/instrumental_variables.html" class="navigation-list-link">Instrumental Variables</a></li><li class="navigation-list-item "><a href="/Model_Estimation/interaction_terms_and_polynomials.html" class="navigation-list-link">Interaction Terms and Polynomials</a></li><li class="navigation-list-item "><a href="/Model_Estimation/linear_mixed_effects_regression.html" class="navigation-list-link">Linear Mixed-Effects Regression</a></li><li class="navigation-list-item "><a href="/Model_Estimation/logit_model.html" class="navigation-list-link">Logit Model</a></li><li class="navigation-list-item  active"><a href="/Model_Estimation/mcfaddens_choice_model.html" class="navigation-list-link active">McFadden's Choice Model (Alternative-Specific Conditional Logit)</a></li><li class="navigation-list-item "><a href="/Model_Estimation/ordinary_least_squares.html" class="navigation-list-link">Ordinary Least Squares (Linear Regression)</a></li><li class="navigation-list-item "><a href="/Model_Estimation/probit_model.html" class="navigation-list-link">Probit Model</a></li><li class="navigation-list-item "><a href="/Model_Estimation/Nonstandard_Errors/nonstandard_errors.html" class="navigation-list-link">Nonstandard Errors</a><ul class="navigation-list-child-list"><li class="navigation-list-item ">
                            <a href="/Model_Estimation/Nonstandard_Errors/clustered_se.html" class="navigation-list-link">Cluster-Robust Standard Errors</a>
                          </li><li class="navigation-list-item ">
                            <a href="/Model_Estimation/Nonstandard_Errors/hc_se.html" class="navigation-list-link">Heteroskedasticity-consistent standard errors</a>
                          </li></ul></li></ul></li><li class="navigation-list-item"><a href="/Presentation/Presentation.html" class="navigation-list-link">Presentation</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Presentation/export_a_formatted_regression_table.html" class="navigation-list-link">Export a Formatted Regression Table</a></li><li class="navigation-list-item "><a href="/Presentation/heatmap_colored_correlation_matrix.html" class="navigation-list-link">Heatmap Colored Correlation Matrix</a></li><li class="navigation-list-item "><a href="/Presentation/line_graph_with_labels_at_the_beginning_or_end.html" class="navigation-list-link">Line Graph with Labels at the Beginning or End of Lines</a></li><li class="navigation-list-item "><a href="/Presentation/marginal_effects_plots_for_interactions_with_continuous_variables.html" class="navigation-list-link">Marginal Effects Plots for Interactions with Continuous Variables</a></li><li class="navigation-list-item "><a href="/Presentation/scatterplot_by_group_on_shared_axes.html" class="navigation-list-link">Scatterplot by Group on Shared Axes</a></li></ul></li><li class="navigation-list-item"><a href="/Summary_Statistics/Summary_Statistics.html" class="navigation-list-link">Summary Statistics</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Summary_Statistics/Balance_Tables.html" class="navigation-list-link">Balance Table</a></li></ul></li><li class="navigation-list-item"><a href="/Time_Series/Time_Series.html" class="navigation-list-link">Time Series</a><ul class="navigation-list-child-list "></ul></li><li class="navigation-list-item"><a href="/Other/Other.html" class="navigation-list-link">Other</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/Other/import_a_foreign_data_file.html" class="navigation-list-link">Import a Foreign Data File</a></li></ul></li><li class="navigation-list-item"><a href="/Desired_Nonexistent_Pages/desired_nonexistent_pages.html" class="navigation-list-link">Desired Nonexistent Pages</a></li><li class="navigation-list-item"><a href="/Contributing/Contributing.html" class="navigation-list-link">Contributing</a></li></ul>
</nav>
      </div>
      <footer class="site-footer">
        <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="main-content">
        <div class="page-header js-page-header">
          <div class="search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search LOST" aria-label="Search LOST" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
            <ul class="list-style-none text-small aux-nav">
                <li class="d-inline-block my-0"><a href="https://github.com/lost-stats/lost-stats.github.io/blob/source/Model_Estimation/mcfaddens_choice_model.md">Edit this page on GitHub</a></li>
            </ul>
        </div>
        <div class="page">
              <nav class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    <li class="breadcrumb-nav-list-item"><a href="/Model_Estimation/Estimation.html">Model Estimation</a></li>
                  <li class="breadcrumb-nav-list-item"><span>McFadden's Choice Model (Alternative-Specific Conditional Logit)</span></li>
                </ol>
              </nav>
          <div id="main-content" class="page-content" role="main">
              <h1 id="mcfaddens-choice-model-alternative-specific-conditional-logit">
          <a href="#mcfaddens-choice-model-alternative-specific-conditional-logit" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> McFadden’s Choice Model (Alternative-Specific Conditional Logit)
      </h1>
<p>Discrete choice models are a regression method used to predict a categorical dependent variable with more than two categories. For example, a discrete choice model might be used to predict whether someone is going to take a train, car, or bus to work.</p>
<p>McFadden’s Choice Model is a discrete choice model that uses <a href="https://lost-stats.github.io/Model_Estimation/conditional_logit.html">conditional logit</a>, in which the variables that predict choice can vary either at the individual level (perhaps tall people are more likely to take the bus), or at the alternative level (perhaps the train is cheaper than the bus).</p>
<p>For more information, see <a href="https://en.wikipedia.org/wiki/Discrete_choice">Wikipedia: Discrete Choice</a></p>
      <h2 id="keep-in-mind">
          <a href="#keep-in-mind" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Keep in Mind
      </h2>
<ul>
  <li>Just like other regression methods, the McFadden model does not guarantee that the estimates will be causal. Similarly, while the McFadden model is designed so that the results can be interpreted in terms of a “random utility” function, making inferences about utility functions does require additional assumptions.</li>
  <li>The standard McFadden model assumes that the choice follows the <a href="https://en.wikipedia.org/wiki/Independence_of_irrelevant_alternatives#In_econometrics">Independence of Irrelevant Alternatives</a>, which may be a strong assumption. There are variants of the McFadden model that relax this assumption.</li>
  <li>If you are working with an estimation command that only allows alternative-specific predictors and not case-specific predictors, you can add them yourself by interacting the case-specific predictors with binary variables for the different alternatives. If <script type="math/tex">Income</script> is your case-specific variable and your alternatives are “train”, “bus”, and “car”, you’d add <script type="math/tex">Income \times (mode == "train")</script>, <script type="math/tex">Income \times (mode == "bus")</script>, and <script type="math/tex">Income \times (mode == "car")</script> to your model. These are your case-specific predictors.</li>
  <li>Choice model regressions often have specific demands on how your data is structured. These vary across estimation commands and software packages. However, a common one is this (others will be pointed out in specific Implementations below): The data must contain a variable indicating the choice cases (i.e. you choose a car, that’s one case, then I choose a car, that’s a different case), a variable with the alternatives being chosen between, a binary variable equal to 1 for the alternative actually chosen (this should be 1 or <code class="highlighter-rouge">TRUE</code> exactly once within each choice case), and then variables that are case-specific or alternative-specific.</li>
</ul>
<p>In the below table, <script type="math/tex">I</script> gives the choice case, <script type="math/tex">Alts</script> gives the options, <script type="math/tex">Chose</script> gives the choice, <script type="math/tex">X</script> is a variable that varies at the alternative level, and <script type="math/tex">Y</script> is a variable that varies at the case level.</p>
<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>I</th>
      <th>Alts</th>
      <th>Chose</th>
      <th>X</th>
      <th>Y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>A</td>
      <td>1</td>
      <td>10</td>
      <td>3</td>
    </tr>
    <tr>
      <td>1</td>
      <td>B</td>
      <td>0</td>
      <td>20</td>
      <td>3</td>
    </tr>
    <tr>
      <td>1</td>
      <td>C</td>
      <td>0</td>
      <td>10.5</td>
      <td>3</td>
    </tr>
    <tr>
      <td>2</td>
      <td>A</td>
      <td>0</td>
      <td>8</td>
      <td>5</td>
    </tr>
    <tr>
      <td>2</td>
      <td>B</td>
      <td>1</td>
      <td>9</td>
      <td>5</td>
    </tr>
    <tr>
      <td>3</td>
      <td>C</td>
      <td>0</td>
      <td>1</td>
      <td>5</td>
    </tr>
  </tbody>
</table></div>
<p>This might be referred to as “long” choice data. “Wide” choice data is also common, and looks like:</p>
<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th>I</th>
      <th>Chose</th>
      <th>Y</th>
      <th>XA</th>
      <th>XB</th>
      <th>XC</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>A</td>
      <td>3</td>
      <td>10</td>
      <td>20</td>
      <td>10.5</td>
    </tr>
    <tr>
      <td>2</td>
      <td>B</td>
      <td>5</td>
      <td>8</td>
      <td>9</td>
      <td>1</td>
    </tr>
  </tbody>
</table></div>
      <h2 id="also-consider">
          <a href="#also-consider" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Also Consider
      </h2>
<ul>
  <li>In order to relax the independence of irrelevant alternatives assumption and/or more closely model individual preferences, consider the <a href="https://lost-stats.github.io/Model_Estimation/mixed_logit.html">mixed logit</a>, <a href="https://lost-stats.github.io/Model_Estimation/nested_logit.html">nested logit</a> or <a href="https://lost-stats.github.io/Model_Estimation/hierarchical_bayes_conditional_logit.html">hierarchical Bayes conditional logit</a> models.</li>
</ul>
      <h1 id="implementations">
          <a href="#implementations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Implementations
      </h1>
      <h2 id="r">
          <a href="#r" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> R
      </h2>
<p>We will implement McFadden’s choice model in R using the <strong>mlogit</strong> package, which can accept “wide” or “long” data in the <code class="highlighter-rouge">mlogit.data</code> function.</p>
<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># If necessary, install mlogit package</span><span class="w">
</span><span class="c1"># install.packages('mlogit')</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">mlogit</span><span class="p">)</span><span class="w">

</span><span class="c1"># Get Car data, in "wide" choice format</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="n">Car</span><span class="p">)</span><span class="w">


</span><span class="c1"># For this we need to specify the choice variable with choice</span><span class="w">
</span><span class="c1"># whether it's currently in wide or long format with shape</span><span class="w">
</span><span class="c1"># the column numbers of the alternative-specific variables with varying.</span><span class="w">
</span><span class="c1"># We need alt.levels to tell us what our alternatives are (1-6, as seen in choice).</span><span class="w">
</span><span class="c1"># We also need sep = "" since our wide-format variable names are type1, type2, etc.</span><span class="w">
</span><span class="c1"># If the variable names were type_1, type_2, etc., we'd need sep = "_".</span><span class="w">
</span><span class="c1"># If this were long data we'd also want:</span><span class="w">
</span><span class="c1"># the case identifier with id.var (for individuals) and/or chid.var </span><span class="w">
</span><span class="c1"># (for multiple choices within individuals)</span><span class="w">
</span><span class="c1"># And a variable indicating the alternatives with alt.var</span><span class="w">
</span><span class="c1"># But could skip the alt.levels and sep arguments</span><span class="w">
</span><span class="n">mlogit.Car</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mlogit.data</span><span class="p">(</span><span class="n">Car</span><span class="p">,</span><span class="w">
                          </span><span class="n">choice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'choice'</span><span class="p">,</span><span class="w">
                          </span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'wide'</span><span class="p">,</span><span class="w">
                          </span><span class="n">varying</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="o">:</span><span class="m">70</span><span class="p">,</span><span class="w">
                          </span><span class="n">alt.levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span><span class="w">
                          </span><span class="n">sep</span><span class="o">=</span><span class="s2">""</span><span class="p">)</span><span class="w">
</span><span class="c1"># mlogit.Car is now in "long" format</span><span class="w">
</span><span class="c1"># Note that if we did start with "long" format we could probably skip the mlogit.data() step.</span><span class="w">

</span><span class="c1"># Now we can run the regression with mlogit().</span><span class="w">
</span><span class="c1"># We "regress" the choice on the alternative-specific variables like type, fuel, and price</span><span class="w">
</span><span class="c1"># Then put a pipe separator | </span><span class="w">
</span><span class="c1"># and add our case-specific variables like college</span><span class="w">
</span><span class="n">model</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mlogit</span><span class="p">(</span><span class="n">choice</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fuel</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">college</span><span class="p">,</span><span class="w"> 
                </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mlogit.Car</span><span class="p">)</span><span class="w">

</span><span class="c1"># Look at the results</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">model</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
      <h2 id="stata">
          <a href="#stata" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Stata
      </h2>
<p>Stata has the McFadden model built in. We will estimate the model using the older <code class="highlighter-rouge">asclogit</code> command as well as the <code class="highlighter-rouge">cmclogit</code> command that comes with Stata 16. These commands require “long” choice data, as described in the Keep in Mind section.</p>
<div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">* Load in car choice data
</span><span class="err">webuse</span> <span class="err">carchoice
</span><span class="c1">
* To use asclogit, we "regress" our choice variable (purchase)
* on any alternative-specific variables (dealers)
* then we put our case ID variable consumerid in case()
* and our variable specifying alternatives, car, in alternatives()
* then finally we put any case-specific variables like gender and income, in casevars()
</span><span class="err">asclogit</span> <span class="err">purchase</span> <span class="err">dealers,</span> <span class="err">case(consumerid)</span> <span class="err">alternatives(car)</span> <span class="err">casevars(gender</span> <span class="err">income)
</span><span class="c1">

* To use cmclogit, we first declare our data to be choice data with cmset
* specifying our case ID variable and then the set of alternatives
</span><span class="err">cmset</span> <span class="err">consumerid</span> <span class="err">car
</span><span class="c1">
* Now that Stata knows the structure, we can omit those parts from the asclogit
* specification, but the rest stays the same!
</span><span class="err">cmclogit</span> <span class="err">purchase</span> <span class="err">dealers,</span> <span class="err">casevars(gender</span> <span class="err">income)
</span></code></pre></div></div>
<p>Why bother with the <code class="highlighter-rouge">cmclogit</code> version? <code class="highlighter-rouge">cmset</code> gives you a lot more information about your data, and makes it easy to transition between different choice model types, including those incorporating panel data (each person makes multiple choices).</p>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
